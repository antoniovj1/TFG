<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>Un portal de transparencia para datos libres</title>

	<meta name="description" content="Trabajo Fin de Grado Grado Ingeniería Informática">
	<meta name="author" content="Germán Martínez Maldonado">

	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/moon.css" id="theme">

	<!-- Code syntax highlighting -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
	var link = document.createElement( 'link' );
	link.rel = 'stylesheet';
	link.type = 'text/css';
	link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
	document.getElementsByTagName( 'head' )[0].appendChild( link );
	</script>

	<!--[if lt IE 9]>
	<script src="lib/js/html5shiv.js"></script>
	<![endif]-->
</head>

<body>

	<div class="reveal">

		<div class="slides">
			<section>
				<h3>Trabajo Fin de Grado</h3>
				<h2>Un portal de transparencia para datos libres</h2>
				<p>
					<font size="6">
						Autor: Germán Martínez Maldonado
						<br>
						Tutor: Juan Julián Merelo Guervós
					</font>
					<br><br>
					<small> Trabajo realizado bajo licencia<a href="https://creativecommons.org/licenses/by-sa/4.0/"> CC-BY-SA 4.0 </a></small>
					<br>
					<img alt="CC-BY-SA" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png"/>
				</p>
			</section>

			<section>
				<section>
					<h2>Introducción</h2>
				</section>
				<section>
					<p>
						Portal de transparencia de la Universidad de Granada:
						<br>
						<a href="http://transparente.ugr.es/"> UGR Transparente </a>
						<br>
						<img alt="images" style="border-width:0" src="images/transparente.png"/>
					</p>
				</section>
				<section>
					<p>
						Plataforma de datos abiertos de la Universidad de Granada:
						<br>
						<a href="http://opendata.ugr.es/"> OpenData UGR </a>
						<br>
						<img alt="images" style="border-width:0" src="images/opendata.png"/>
					</p>
				</section>
			</section>

			<section>
				<section>
					<h2>Objetivos</h2>
				</section>
				<section>
					<h2>Objetivos principales</h2>
					<ol style="text-align: justify;">
						<li>Promover el desarrollo bajo software libre en la administración pública</li>
						<li>Solucionar problemas visualización en el portal</li>
						<li>Implementar una metodología de desarrollo continuo DevOps</li>
					</ol>
				</section>
				<section>
					<h2>Objetivo secundario</h2>
					<ol style="text-align: justify;">
						<li>Desarrollo de una plataforma CKAN totalmente personalizada</li>
					</ol>
				</section>
				<section>
					<h2>Alcance de los objetivos</h2>
					<ul style="text-align: justify;">
						<li>Mismo resultado, diferente desarrollo</li>
						<li>Indiferencia del ámbito.</li>
					</ul>
				</section>
			</section>

			<section>
				<section>
					<h2>Planificación</h2>
				</section>
				<section>
					<h2>Fases y entregas</h2>
					<ol>
						<li>Especificación proyecto</li>
						<li>Planificación</li>
						<li>Análisis y diseño</li>
						<li>Implementación</li>
						<li>Pruebas</li>
						<li>Documentación</li>
					</ol>
				</section>
				<section>
					<h2>Estructura de descomposición del trabajo</h2>
					<img alt="images" style="border-width:0" src="images/diagrama_edt.png"/>
				</section>
				<section>
					<h2>Temporización</h2>
					<img alt="images" style="border-width:0" src="images/tempo_tareas.png"/>
					<img alt="images" style="border-width:0" src="images/diagrama_gantt.png"/>
				</section>
			</section>

			<section>
				<section>
					<h2>Análisis</h2>
				</section>
				<section>
					<h2>Actores</h2>
					<ol>
						<li>Desarrollador</li>
						<li>Usuario</li>
					</ol>
					<br><br>
					<b>"Persona"</b>
				</section>
				<section>
					<h2>Requisitos</h2>
					<ul>
						<li><b>Funcionales</b>: administración portal, acceso información, pruebas de software, configuración automática</li>
						<li><b>No funcionales</b>: Node.js</li>
						<li><b>Información</b>: elementos y enlaces</li>
					</ul>
				</section>
				<section>
					<h2>Modelos de casos de uso</h2>
					<ul>
						<li><b>Descripción básica de los actores</b>: descripción, características, relaciones, atributos</li>
						<li><b>Descripción casos de uso</b>: actores, tipo, referencias, precondición, postcondición, proposito, resumen, curso normal/alterno</li>
					</ul>
				</section>
				<section>
					<img alt="images" style="border-width:0" src="images/ej_cu_01.png"/>
					<img alt="images" style="border-width:0" src="images/ej_cu_02.png"/>
				</section>
				<section>
					<h2>Diagramas</h2>
					<ul>
						<li>Diagrama de paquetes</li>
						<li>Diagramas de casos de uso</li>
						<li>Diagramas de actividad</li>
						<li>Diagrama conceptual</li>
					</ul>
				</section>
			</section>

			<section>
				<section>
					<h2>Diseño</h2>
				</section>
				<section>
					<h2>Diseño general</h2>
					<ul>
						<li>Node.js</li>
						<li>JSON</li>
						<li>Módulos de la aplicación</li>
						<li>Módulos para el desarrollo continuo</li>
					</ul>
				</section>
				<section>
					<h2>Desarrollo colaborativo</h2>
					<ul>
						<li>Sistema de control de versiones: <b>Git</b></li>
						<li>Plataforma de desarrollo: <b>GitHub</b></li>
						<li>Metodología de desarrollo: <b>DevOps</b></li>
					</ul>
				</section>
				<section>
					<h2>Diseño de los tests</h2>
					<ul>
						<li>TDD</li>
						<li>Tests basados en el comportamiento</li>
						<li>Test unitarios: <b>Mocha</b></li>
						<li>Test de cobertura: <b>Istanbul</b></li>
					</ul>
				</section>
				<section>
					<h2>Resto del desarrollo continuo</h2>
					<ul>
						<li>Integración continua: <b>Travis CI</b></li>
						<li>Despliegue automático: <b>Flightplan</b></li>
						<li>Provisionamiento: <b>Ansible</b></li>
					</ul>
				</section>
			</section>

			<section>
				<section>
					<h2>Implementación</h2>
				</section>
				<section>
					<h2>Uso de JSON</h2>
					<pre><code data-trim contenteditable>
{
  "nombre":"Personal",
  "plantilla":"personal",
  "contenido":[
    {
      "encabezado":"Información Salarial: 2015",
      "link":"informacion-salarial-2015",
      "texto":"Información relativa a la oferta de recursos humanos de la universidad: personal docente e investigador (PDI) y personal de administración y servicios (PAS). Se ofrecen los datos sobre el personal contratado y sus distintas categorías referentes al curso 2014 / 2015: PAS (funcionarios y laborales) y PDI (funcionarios y laborales)."
    },

  ],
  "datos":[
    {
      "dataset":"Información Salarial: 2015",
      "id_dataset":"informacion-salarial-2015",
      "nombre":"Análisis total plantilla: género",
      "vista":1,
      "url":"51d53138-0408-4257-9909-57acea137a58",
      "descarga":"985a8e1e-734b-432a-ac65-a7da6a4143d0/resource/51d53138-0408-4257-9909-57acea137a58/download/analisisgeneroplantillatotal.csv"
    },

  ]
}
					</code></pre>
				</section>
				<section>
					<h2>Tests unitarios y de cobertura</h2>
					<pre><code data-trim contenteditable>
var should = require("should"),
request = require("supertest");

describe('Test de carga y formato de JSONs', function(){
	describe('Archivo de configuración', function(){
		var config = cargar(__dirname+"/../config/config.json");

		describe('Carga de archivo', function(){
			it('Cargado', function(){
				config.should.not.be.null;
			});
		});

		describe('Formato de archivo', function(){
			describe('Campos obligatorios', function(){
				it('nombre', function(){
					config.should.have.property("nombre");
				});
			});
		});

	});
};
					</code></pre>
				</section>
				<section>
					<h2>Integración continua</h2>
					<img alt="images" style="border-width:0" src="images/activar_travis.png"/>
				</section>
				<section>
					<h2>Despliegue automático</h2>
					<pre><code data-trim contenteditable>
var plan = require('flightplan');

plan.target('transparente', {
	host: 'transparente.ugr.es',
	username: process.env.USER,
	agent: process.env.SSH_AUTH_SOCK
});

plan.remote(function(remote) {
	remote.log('Creando copia de seguridad...');
	remote.sudo('cp -Rf ugr-transparente-servidor ugr-transparente-servidor.bak', {user: process.env.USER});

	remote.with('cd ugr-transparente-servidor',function() {
		remote.log('Deteniendo el servidor...');
		remote.exec('sudo npm run-script kill');
		remote.log('Restableciendo parámetros de acceso...');
		remote.exec('sed "s/IP=transparente.ugr.es/IP=127.0.0.1/" -i package.json');
		remote.exec('sed "s/PORT=80/PORT=3000/" -i package.json');
		remote.log('Obteniendo cambios...');
		remote.exec('git pull');
		remote.log('Instalando dependencias...');
		remote.exec('sudo npm install');
		remote.log('Cambiando parámetros de acceso...');
		remote.exec('sed "s/IP=127.0.0.1/IP=transparente.ugr.es/" -i package.json');
		remote.exec('sed "s/PORT=3000/PORT=80/" -i package.json');
		remote.log('Arrancando el servidor...');
		remote.exec('sudo npm start');
	});
});
					</code></pre>
				</section>
				<section>
					<h2>Provisionamiento</h2>
					<pre><code data-trim contenteditable>
---
- hosts: transparente
sudo: yes
remote_user: "{{user}}"
tasks:
- name: Añadiendo repositorio para instalar Node.js...
apt_repository: repo='ppa:chris-lea/node.js'

- name: Actualizando lista de paquetes...
apt: update_cache=yes

- name: Instalando git...
apt: name=git state=present

- name: Instalando Node.js...
apt: name=nodejs state=present

- name: Clonando repositorio con la aplicación...
git: repo=https://github.com/oslugr/ugr-transparente-servidor.git
dest=/home/"{{user}}"/ugr-transparente-servidor
version=master

- name: Cambiando propietario del directorio de la aplicación...
file: path=/home/"{{user}}"/ugr-transparente-servidor
owner="{{user}}" group="{{user}}" state=directory recurse=yes

- name: Instalando las dependencias de la aplicación...
npm: path=/home/"{{user}}"/ugr-transparente-servidor

- name: Cambiando parámetros de acceso (1/2)...
command: sed "s/IP=127.0.0.1/IP=transparente.ugr.es/" -i
/home/"{{user}}"/ugr-transparente-servidor/package.json

- name: Cambiando parámetros de acceso (2/2)...
command: sed "s/PORT=3000/PORT=80/" -i
/home/"{{user}}"/ugr-transparente-servidor/package.json

- name: Arrancando el servidor...
command: chdir=ugr-transparente-servidor npm start
					</code></pre>
				</section>
			</section>

			<section>
				<section>
					<h2>Pruebas</h2>
				</section>
				<section>
					<h2>Pruebas unitarias</h2>
					<img alt="images" style="border-width:0" src="images/tests_unitarios_01.png"/>
				</section>
				<section>
					<h2>Pruebas unitarias</h2>
					<img alt="images" style="border-width:0" src="images/tests_unitarios_02.png"/>
				</section>
				<section>
					<h2>Pruebas unitarias</h2>
					<img alt="images" style="border-width:0" src="images/tests_unitarios_03.png"/>
				</section>
				<section>
					<h2>Pruebas de cobertura</h2>
					<img alt="images" style="border-width:0" src="images/test_cobertura_01.png"/>
				</section>
				<section>
					<h2>Pruebas de cobertura</h2>
					<img alt="images" style="border-width:0" src="images/test_cobertura_02.png"/>
				</section>
				<section>
					<h2>Pruebas de cobertura</h2>
					<img alt="images" style="border-width:0" src="images/test_cobertura_03.png"/>
				</section>
				<section>
					<h2>Integración continua</h2>
					<img alt="images" style="border-width:0" src="images/integracion_continua_01.png"/>
				</section>
				<section>
					<h2>Integración continua</h2>
					<img alt="images" style="border-width:0" src="images/integracion_continua_02.png"/>
				</section>
				<section>
					<h2>Integración continua</h2>
					<img alt="images" style="border-width:0" src="images/integracion_continua_03.png"/>
				</section>
				<section>
					<h2>Despliegue automático</h2>
					<img alt="images" style="border-width:0" src="images/deploy.png"/>
				</section>
				<section>
					<h2>Provisionamiento</h2>
					<img alt="images" style="border-width:0" src="images/provision.png"/>
				</section>
				<section>
					<h2>Prueba de carga</h2>
					<ul>
						<li>Últimos 6 meses: 2.388 peticiones</li>
						<li>13 peticiones/día aproximádamente</li>
						<li>Pruebas con diferentes números de conexiones (30, 50, 100) y niveles de concurrencia (25%, 50%, 75%)</li>
						<li>Peticiones a la página más accedida</li>
						<li>Pruebas repetidas 10 veces con ApacheBench</li>
					</ul>
				</section>
				<section>
					<h2>Prueba de carga</h2>
					<ul>
						<li>Últimos 6 meses: 2.388 peticiones</li>
						<li>13 peticiones/día aproximádamente</li>
						<li>Pruebas con diferentes números de conexiones (30, 50, 100) y niveles de concurrencia (25%, 50%, 75%)</li>
						<li>Peticiones a la página más accedida</li>
						<li>Pruebas repetidas 10 veces con ApacheBench</li>
					</ul>
				</section>
				<section>
					<h2>Prueba de carga</h2>
					<ul>
						<li>Tiempo de ejecución</li>
						<li>Solicitudes por segundo</li>
						<li>Tiempo por solicitud concurrente</li>
						<li>Velocidad de transferencia</li>
					</ul>
				</section>
				<section>
					<h2>Prueba de carga</h2>
					<img alt="images" style="border-width:0" src="images/gra_te.png"/>
				</section>
			</section>

			<section>
				<h2>Conclusiones y trabajos futuros</h2>
				<ul>
					<li>Ventajas de desarrollo continuo</li>
					<li>Realizar instalación personalizada CKAN</li>
					<li>Portal más dinámico</li>
					<li>Solucionar saturación de servidor</li>
				</ul>
			</section>

			<section>
				<section>
					<h2>Bibliografía</h2>
					<ul>
						<li><a href="http://apmblog.dynatrace.com/2014/11/18/continuous-delivery-101-automated-deployments/">"Continuous Delivery 101: Automated Deployments"</a>. Martin Etmajer, 18/11/2014.</li>
						<li><a href="http://blog.itlinux.cl/blog/2013/10/23/que-es-devops/">"¿Qué es DevOps?"</a>. Patricio Bruna, 23/10/2013.</li>
						<li><a href="http://code.tutsplus.com/articles/the-beginners-guide-to-unit-testing-what-is-unit-testing--wp-25728">"The Beginner’s Guide to Unit Testing: What Is Unit Testing?"</a>. Tom McFarlin, 19/06/2012.</li>
						<li><a href="http://code.tutsplus.com/tutorials/travis-ci-what-why-how--net-34771">"Travis-CI: What, Why, How"</a>. Sayanee Basu, 18/09/2013.</li>
					</ul>
				</section>
				<section>
					<h2>Bibliografía</h2>
					<ul>
						<li><a href="http://theagileadmin.com/what-is-devops/">"What Is DevOps?"</a>. Carlos Gomez, 07/12/2011.</li>
						<li><a href="http://www.clock.co.uk/blog/tools-for-unit-testing-and-quality-assurance-in-node-js">"Tools for Unit Testing and Quality Assurance in Node JS"</a>. Adam Duncan, 29/04/2014.</li>
						<li><a href="http://www.smashingmagazine.com/blog/2014/08/06/a-closer-look-at-personas-part-1/">"A Closer Look At Personas: What They Are And How They Work (Part 1)"</a>. Shlomo Goltz, 06/08/2014.</li>
						<li><a href="https://en.wikipedia.org/wiki/Persona_(user_experience)">"Persona (user experience)"</a>. Wikipedia, última edición: 26/05/2015.</li>
					</ul>
				</section>
				<section>
					<h2>Bibliografía</h2>
					<ul>
						<li><a href="https://nicolas.perriault.net/code/2013/testing-frontend-javascript-code-using-mocha-chai-and-sinon/">"Testing your frontend JavaScript code using mocha, chai, and sinon"</a>. Nicolas Perriault, 23/07/2013.</li>
						<li>Pagina de licencia CreativeCommons y APIs del software utilizado</li>
						<li>Material docente de las asignaturas <b>Fundamentos de Ingeniería del Software</b>, <b>Ingeniería de Servidores</b> e <b>Infraestructura Virtual</b></li>
					</ul>
				</section>
			</section>

		</div>

	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>

	// Full list of configuration options available at:
	// https://github.com/hakimel/reveal.js#configuration
	Reveal.initialize({
		controls: true,
		progress: true,
		history: true,
		center: true,

		transition: 'convex', // none/fade/slide/convex/concave/zoom

		// Optional reveal.js plugins
		dependencies: [
			{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
			{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
			{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
			{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
			{ src: 'plugin/zoom-js/zoom.js', async: true },
			{ src: 'plugin/notes/notes.js', async: true }
		]
	});

	</script>

</body>
</html>
