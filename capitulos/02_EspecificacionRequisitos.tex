\chapter{Especificación de requisitos}

\section{Objetivos}

El objetivo de este proyecto es el de obtener un portal de transparencia para la Universidad de Granada basado en el software 
libre que además permita una metodología de desarrollo en el que continuamente se puedan añadir nuevas funcionalidades a la 
vez que se van testeando, para después de una fácil integración culminar con un despliegue automático. Este portal no almacenará
los propios datos abiertos, si no que hará de presentación de los datos que estarán contenidos en otra plataforma destinada 
únicamente a dicho fin (OpenData UGR).

\bigskip
Un resumen de los principales objetivos a alcanzar son:

\begin{itemize}
  \item \textbf{OBJ-1.} Promover la idea de que los desarrollos bajo software libre en general y en la administración pública 
  en particular ayudan a generar confianza y demuestran compromiso con la transparencia.
  \item \textbf{OBJ-2.} Solucionar los problemas de generación de las tablas con los elementos de información.
  \item \textbf{OBJ-3.} Implementar en la plataforma UGR Transparente una metodología de desarrollo continuo que se base 
  en el uso de tests unitarios para cada una de las funcionalidades que se vayan añadiendo, test de 
  cobertura que evalúen los test unitarios, integración continua ante cambios introducidos, despliegue automático de las
  actualizaciones que se vayan produciendo y aprovisionamiento software para la infraestructura.
\end{itemize}

\newpage
Además como objetivo secundario tendremos:

\begin{itemize}
  \item \textbf{OBJ-4.} Estudiar la posibilidad de hacer una instalación totalmente personalizada del portal de datos de código
  abierto CKAN para los datos abiertos de la Universidad de Granada, además de un aprovisionamiento que permitiera que esta 
  instalación se pudiera realizar automáticamente en una infraestructura.
\end{itemize}

Todos los objetivos son independientes entre sí, pero el primer objetivo (\textbf{OBJ-1}) es el principal motivador de este 
proyecto, por lo que aún sin representar el desarrollo de ningún trabajo en concreto es el que va a escudar y avalar el 
desarrollo de los otros. En aspectos más relacionados con la realización del proyecto, el segundo objetivo (\textbf{OBJ-2}) es
el que se solucionará de forma inmediata ya que impide el correcto funcionamiento del portal. El resto de objetivos serán 
tratados en mayor medida durante los capítulos de implementación y pruebas.

\bigskip
Destacar en los aspectos formativos previos más utilizados para el desarrollo del proyectolos conocimientos sobre 
infraestructuras virtuales para el tema de gestión de configuraciones, ingeniería de software para el análisis del proyecto 
e ingeniería de servidores para la realización de pruebas desde el aspecto hardware.

\subsection{Alcance de los objetivos}

La aplicación resultante visualmente será idéntica que la versión actual de UGR Transparente, pero internamente habrá cambiado
totalmente la metodología de desarrollo, pasando de un desarrollo sin control a uno totalmente controlado mediante pruebas 
unitarias e integración continua. Además los cambios ya no se tendrá que aplicar manualmente en el servidor, sino que se hará
uso de un despliegue automático para tal fin.

\bigskip
Esta aplicación se usará de base en la Universidad de Granada, pero además el objetivo del desarrollo es que se pueda exportar 
para su uso en cualquier organización sin demasiada dificultad, de ahí que se vaya a estudiar también la posibilidad de 
personalización de CKAN, ya que esto permitiría generar una gran plataforma de liberación de datos totalmente personalizable
según el ámbito y las necesidades.

\section{Análisis de requisitos}

Todo software se desarrolla para cubrir una necesidad, por lo que en este apartado vamos a describir los requisitos que se 
estiman necesarios para cubrir los objetivos propuestos.

\subsection{Descripción de los actores}

El usuario de la aplicación será cualquier persona que tenga interés por conocer datos internos de la Universidad de Granada 
fácilmente. Como no se quiere enfocar en un público objetivo, el portal tiene que ser fácil de utilizar tanto para personas 
con experiencia en la navegación de páginas web como para las que no la tengan.

\bigskip
También tenemos al desarrollador, que será el encargado de introducir los elementos de información que serán listado en la
plataforma. Como es una página estática, los elementos serán mostados en la tabla correspondiente de la página correspondiente
después de que sean leidos del archivo JSON correspondiente.

\subsection{Requisitos Funcionales}

Los requisitos funcionales son las características que tiene que implementar el sistema para cubrir todas las necesidades de 
los distintos usuarios. Al usuario lo único que le interesa es ver una página web estática con la información que desea 
consultar, por lo que el único requisito imprescindible es que cuando pulse una categoría esta se despliegue y cuando se 
pulse un enlace a OpenData UGR este nos lleve al conjunto de datos correspondiente. Además, se habilitará un buscador para que
también se pueda acceder a la información mediante la introducción de palabras clave. Todos los requisitos funcionales que 
tratará este proyecto están únicamente dirigidos a la plataforma UGR Transparente.

\begin{itemize}
  \item \textbf{RF-1.} Introducción de nuevos elementos de información.
\end{itemize}

\begin{itemize}
  \item \textbf{RF-2.} Acceso a la información:
  \begin{itemize}
    \item \textbf{RF-2.1.} Al seleccionar una categoría esta se despliega y aparecen sus subcategorías.
    \item \textbf{RF-2.2.} Al seleccionar una subcategoría se muestran todos sus elementos.
    \item \textbf{RF-2.2.} Cuando se pulsa sobre el enlace de un elemento, automáticamente se accede a la información contenida 
    de ese elemento en OpenData UGR.
    \item \textbf{RF-2.3.} Para obtener información sobre un tema en concreto se introducirá el termino clave relacionado en 
    el buscador.
    \end{itemize}
\end{itemize}

\newpage
\begin{itemize}
  \item \textbf{RF-3.} Presentación de la información:
  \begin{itemize}
    \item \textbf{RF-.1.} Generar tablas con los elementos de información.
    \item \textbf{RF-3.1.} Si el elemento de información no es un archivo PDF este se podrá previsualizar desde el mismo portal
    de transparencia sin necesidad de acceder a OpenData UGR.
    \item \textbf{RF-3.2.} Siempre se podrá descargar el archivo con la información contenido en OpenData UGR sobre cualquier 
    elemento listado.
  \end{itemize}
\end{itemize}
	
Los aspectos de funcionalidad ya se encuentran implementados en su mayoría (solo existen problemas al cargar la información) de
una fase previa al proyecto por lo que esta será la base de la que se partirá para el desarrollo.

\subsection{Requisitos no Funcionales}

Los requisitos no funcionales son las características propias del desarrollo, pero que no tienen que estar relacionadas con su 
funcionalidad. En este caso nos referimos a todas las características que se requieren para que la aplicación siga un 
desarrollo ágil de despliegue continuo y administración automatica de la plataforma UGR Transparente.

\begin{itemize}
  \item \textbf{RN-1.} Procesar la información que será mostrada en las distintas páginas del portal.
  \item \textbf{RN-2.} Implementar tests unitarios para validar que todas las funcionalidades programadas funcionan 
  correctamente.
  \item \textbf{RN-3.} Realizar test de cobertura que compruebe la fiabilidad que proporcionan los tests unitarios.
  \item \textbf{RN-4.} Usar integración continua para asegurarse que los cambios introducidos no producen conflictos en la 
  plataforma.
  \item \textbf{RN-5.} Usar despliegue automático para actualizar con los nuevos cambios la plataforma una vez estos han sido 
  validados.
  \item \textbf{RN-6.} Elaborar una aprovisionamiento que permita que en una infraestructura por determinar se pueda instalar 
  automáticamente la plataforma y todos los elementos necesarios.
\end{itemize}

En cuanto a la plataforma OpenData UGR, este proyecto solo contempla un único objetivo no funcional que está relacionado con
la administración del sistema más que con que aspectos de desarrollo software.

\begin{itemize}
  \item \textbf{RN-7.} Crear una aprovisionamiento y personalización de CKAN para OpenData UGR.
\end{itemize}

\subsection{Requisitos de Información}

Los requisitos de información se refieren a la información que es necesaria almacenar en el sistema. La única información 
relevante que se va a almacenar son los datos descriptivos y de enlace de cada uno de los elementos del portal OpenData UGR 
que se van a mostrar en UGR Transparente.

\begin{itemize}
  \item \textbf{RI-1.} Datos abiertos.
  \begin{itemize}
    \item Información sobre cada uno de los elementos que se van a mostrar en el portal de transparencia como datos abiertos.
    \item Contenido: nombre, categoría, conjunto de datos, enlace a OpenData UGR, enlace al recurso.
  \end{itemize}
\end{itemize}

\section{Modelos de casos de uso}

Aunque ya se ha indicado que la parte funcional ya se encuentra implementada de forma previa a este proyecto, se van a incluir
unos modelos de caso de uso simples para dar un visión más clara del funcionamiento general de la plataforma UGR Transparente.

\subsection{Descripción básica de actores}

\begin{itemize}
  \item \textbf{Ac-1.} Usuario
  \begin{itemize}
   \item Descripción: Persona que usa la plataforma que consulta datos.
   \item Características: Es el usuario común que accederá a la página.
   \item Relaciones: Ninguna.
   \item Atributos: Ninguno.
   \item Comentarios: El usuario no es necesario que tenga ningún conocimiento previo al uso de la plataforma, simplemente
   accederá y consultará los datos que sean de su interes.
  \end{itemize}
    \item \textbf{Ac-1.} Desarrollador
  \begin{itemize}
   \item Descripción: Encargado de añadir los elementos de información a la plataforma.
   \item Características: Su trabajo está en el lado del servidor que genera la página, nunca trabaja desde el lado del cliente.
   \item Relaciones: Ninguna.
   \item Atributos: Ninguno.
   \item Comentarios: Es el encargado de desarrollar las funcionalidades del portal, entre ellas añadir nuevos elementos de
   información.
  \end{itemize}
\end{itemize}

\subsection{Descripción casos de uso}

\begin{itemize}
 \item \textbf{CU-1.} Añadir elemento
 \begin{itemize}
  \item Actores: Desarrollador
  \item Tipo: Primario, Esencial
  \item Precondición: Ninguna
  \item Postcondición: Nuevos elementos de información serán visualizados en el portal de transparencia
  \item Propósito: Son añadidos nuevos elementos de información al portal de transparencia.
  \item Resumen: Aparecerán nuevos elementos de informaciónen la categória que corresponda, acompañado además de su enlace
  correspondiente al OpenData UGR, un botón para previsualizar la información y otro botón para descargar el elemento.
 \end{itemize}
\end{itemize}

\begin{itemize}
 \item \textbf{CU-2.} Consultar elementos
 \begin{itemize}
  \item Actores: Usuario
  \item Tipo: Primario, esencial
  \item Precondición: Existan elementos de información.
  \item Postcondición: Se muestran los elementos de información de un determinado conjunto de datos.
  \item Propósito: Obtiene los elementos de información de un determinado conjunto de datos.
  \item Resumen: Accediendo a través del panel principal o el buscador se obtiene una tabla con los elementos de información
  de un determinado conjunto de datos.
 \end{itemize}
\end{itemize}

\begin{itemize}
 \item \textbf{CU-3.} Acceder enlace de elemento
 \begin{itemize}
  \item Actores: Usuario
  \item Tipo: Primario, esencial
  \item Precondición: Se hayan generado las tablas con los elementos de información.
  \item Postcondición: 
  \item Propósito: Accede a la información del elemento contenida en OpenData UGR.
  \item Resumen: Cuando se pulsa el enlace, se accede al conjunto de datos que contiene la información del elemento en OpenData
  UGR, presentándolo de distinta forma en función del formato del elemento y dando la opción de descagar ese mismo elemento en 
  un archivo con su formato original.
 \end{itemize}
\end{itemize}

\begin{itemize}
 \item \textbf{CU-4.} Previsualizar elemento de información
 \begin{itemize}
  \item Actores: Usuario
  \item Tipo: Secundario
  \item Precondición: Se hayan generado las tablas con los elementos de información.
  \item Postcondición: 
  \item Propósito: Previsualiza los datos del elemento.
  \item Resumen: Cuando se selecciona el botón de ver un elemento de la tabla se abre una ventana emergente en la que se 
  muestra la información del elemento que se contiene en OpenData UGR.
 \end{itemize}
\end{itemize}

\begin{itemize}
 \item \textbf{CU-5.} Descargar elemento de información
 \begin{itemize}
  \item Actores: Usuario
  \item Tipo: Secundario
  \item Precondición: Se hayan generado las tablas con los elementos de información.
  \item Postcondición: 
  \item Propósito: Descagar el elemento en un archivo con su formato original.
  \item Resumen: Cuando se selecciona el botón de descargar un elemento de la tabla se abre una ventana emergente en la que se
  muestra la información del elemento que se contiene en OpenData UGR.
 \end{itemize}
\end{itemize}

\subsection{Diagramas de casos de uso}

Desde un punto de vista funcional es el usuario el que realiza la mayoria de las acciones del portal, la función del 
desarrollar aunque fundamental, solo es una acción que se realiza en un segundo plano del que no se tiene constancia desde 
fuera.

\bigskip
La figura 2.1 representa el diagrama de estado de los casos de usos considerados inicialmente para el proyecto. 

\newpage
\begin{figure}[!h]
  \begin{center}
  \includegraphics[width=1\textwidth]{imagenes/diagrama_casos_uso.png}
  \end{center}
  \caption[Casos de uso]{Diagramas de casos de uso}
\end{figure}
