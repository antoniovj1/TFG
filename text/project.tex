\documentclass[a4paper,11pt]{book}
\usepackage{listings}
\usepackage[utf8]{inputenc}
\usepackage[spanish,es-tabla]{babel}
\usepackage{pdflscape}
% \usepackage{geometry}



\usepackage{xcolor}



\usepackage{titlesec}
%\usepackage{pailatino}

\decimalpoint
\usepackage{dcolumn}
\newcolumntype{.}{D{.}{\esperiod}{-1}}
\makeatletter
\addto\shorthandsspanish{\let\esperiod\es@period@code}
\makeatother

%\RequirePackage{verbatim}
%\RequirePackage[Glenn]{fncychap}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{afterpage}
\usepackage{longtable}
\usepackage[pdfborder={000}]{hyperref}



% ********************************************************************
% Información reutilizable
% ********************************************************************
\newcommand{\asunto}{Trabajo de Fin de Grado}
\newcommand{\titulo}{Un portal de transparencia para datos libres}
\newcommand{\tituloEng}{A transparency portal for open data}
\newcommand{\grado}{Grado en Ingeniería Informática}
\newcommand{\autor}{Germán Martínez Maldonado}
\newcommand{\email}{germaaan@gmail.com}
\newcommand{\tutor}{Juan Julián Merelo Guervós}
\newcommand{\escuela}{Escuela Técnica Superior de Ingenierías Informática y de Telecomunicación}
\newcommand{\universidad}{Universidad de Granada}
\newcommand{\ciudad}{Granada}
\newcommand{\vers}{Versión 0.1}

\hypersetup{
pdfauthor = {\autor\ (\email)},
pdftitle = {\titulo},
pdfsubject = {\asunto},
pdfkeywords = {software libre, transparencia, datos abiertos, sistema de control de versiones, provisionamiento, tests, 
integración continua, despliegue automático},
pdfcreator = {LaTeX con el paquete texlive},
pdfproducer = {pdflatex}
}

%\hyphenation{}

\usepackage{url}
\usepackage{colortbl,longtable}
\usepackage[stable]{footmisc}
%\usepackage{index}

%\makeindex



% Redefinición de comandos
\renewcommand{\lstlistingname}{Fragmento de código}
\renewcommand{\lstlistlistingname}{Índice de fragmentos de código}
\renewcommand{\indexname}{Índice alfabético}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[LO]{\leftmark}
\fancyhead[RE]{\rightmark}
\fancyhead[RO,LE]{\textbf{\thepage}}
\renewcommand{\chaptermark}[1]{\markboth{\textbf{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\textbf{\thesection. #1}}}

\setlength{\headheight}{1.5\headheight}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
%Definimos los tipos ejemplo y definición podremos usar estos tipos
\newtheorem{ejemp}{Ejemplo}[chapter]
\newtheorem{defi}{Definición}[chapter]

\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
\definecolor{gray30}{gray}{.94}
\definecolor{lightgray}{rgb}{.9,.9,.9}
\definecolor{darkgray}{rgb}{.4,.4,.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}

\colorlet{punct}{red!60!black}
\colorlet{numb}{magenta!60!black}

\lstset{
	frame=Ltb,
	framerule=0.5pt,
	aboveskip=0.5cm,
	framextopmargin=3pt,
	framexbottommargin=3pt,
	framexleftmargin=0.1cm,
	framesep=0pt,
	rulesep=.4pt,
	backgroundcolor=\color{gray97},
	rulesepcolor=\color{black},
	%
	stringstyle=\ttfamily,
	showstringspaces = false,
	basicstyle=\scriptsize\ttfamily,
	commentstyle=\color{gray45},
	keywordstyle=\bfseries,
	%
	numbers=left,
	numbersep=6pt,
	numberstyle=\tiny,
	numberfirstline = false,
	breaklines=true,
	literate={á}{{\'a}}1
	         {é}{{\'e}}1
	         {í}{{\'i}}1
	         {ó}{{\'o}}1
	         {ú}{{\'u}}1
	         {ñ}{{\~n}}1
}
 
% Minimizar fragmentado de listados
\lstnewenvironment{listing}[1][]
	{\lstset{#1}\pagebreak[0]}{\pagebreak[0]}

% http://tex.stackexchange.com/questions/89574/language-option-supported-in-listings/89576#89576
\lstdefinelanguage{javascript}{
  basicstyle=\footnotesize,
  numbers=left,
  numberstyle=\scriptsize,
  stepnumber=1,
  numbersep=8pt,
  captionpos=b,
  showstringspaces=false,
  breaklines=true,
  frame=lines,
  backgroundcolor=\color{background},
  keywords={typeof,new,true,false,catch,function,return,null,catch,switch,var,if,in,while,do,else,case,break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class,export,boolean,throw,implements,import,this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
 }

% http://tex.stackexchange.com/questions/83085/how-to-improve-listings-display-of-json-files/83100#83100
\lstdefinelanguage{json}{
  basicstyle=\footnotesize,
  numbers=left,
  numberstyle=\scriptsize,
  stepnumber=1,
  captionpos=b,
  numbersep=8pt,
  showstringspaces=false,
  breaklines=true,
  frame=lines,
  backgroundcolor=\color{background},
  literate=
    *{:}{{{\color{punct}{:}}}}{1}
     {,}{{{\color{punct}{,}}}}{1}
     {\{}{{{\color{delim}{\{}}}}{1}
     {\}}{{{\color{delim}{\}}}}}{1}
     {[}{{{\color{delim}{[}}}}{1}
     {]}{{{\color{delim}{]}}}}{1}
     {ñ}{{\~{n}}}1
     ,
}

\newcommand{\bigrule}{\titlerule[0.5mm]}

% Para que las páginas en blanco no tengan cabecera
\makeatletter
\def\clearpage{%
  \ifvmode
    \ifnum \@dbltopnum =\m@ne
      \ifdim \pagetotal <\topskip
        \hbox{}
      \fi
    \fi
  \fi
  \newpage
  \thispagestyle{empty}
  \write\m@ne{}
  \vbox{}
  \penalty -\@Mi
}
\makeatother





\usepackage{pdfpages}

\begin{document}
\input{front/front}
\frontmatter
\input{prefaces/prefaces}

\begingroup
\let\cleardoublepage\clearpage
  \tableofcontents
  \listoffigures
  \listoftables
  \lstlistoflistings
\endgroup

\newpage
\thispagestyle{empty}
\
\mainmatter
\input{chapters/01_Introduccion}
\input{chapters/02_Objetivos}
\input{chapters/03_Planificacion}
\input{chapters/04_Analisis}
\input{chapters/05_Diseno}
\input{chapters/06_Implementacion}
\input{chapters/07_Pruebas}
\input{chapters/08_Conclusiones}
\backmatter
\begingroup
	\setlength\parindent{0pt}
	\input{back/glossary}
\endgroup
%\addcontentsline{toc}{chapter}{Glosario}
%\nocite{*}
%\bibliography{bibliography/bibliography}\addcontentsline{toc}{chapter}{Bibliografía}
%\bibliographystyle{miunsrturl}
%
%\appendix
%\input{apendices/manual_usuario/manual_usuario}


%\newpage
%\thispagestyle{empty}

\end{document}